{
  "_id": "_design/whisks-filters.v2",
  "language": "javascript",
  "views": {
    "activations-count": {
      "map": "function (doc) {\n  var PATHSEP = '/';\n  var isActivation = function (doc) { return (doc.activationId !== undefined) };\n  var pathFilter = function(doc) {\n  for (i = 0; i < doc.annotations.length; i++) {\n  var a = doc.annotations[i];\n  if (a.key == 'path') try {\n  var p = a.value.split(PATHSEP);\n  if (p.length == 3) {\n  return p[1] + PATHSEP + doc.name;\n  } else return doc.name;\n  } catch (e) {\n  return doc.name;\n  }\n  }\n  return doc.name;\n  }\n\n  if (isActivation(doc)) try {\n  emit([doc.namespace, doc.start], 1);\n  emit([doc.namespace+PATHSEP+pathFilter(doc), doc.start], 1);\n  } catch (e) {}\n\n  }",
      "reduce": "_count"
    }
  }
}
